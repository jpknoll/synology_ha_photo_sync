FROM python:3.11-slim

WORKDIR /workspace

# Install system dependencies and set timezone
RUN apt-get update && apt-get install -y \
    git \
    tzdata \
    && rm -rf /var/lib/apt/lists/* \
    && ln -sf /usr/share/zoneinfo/America/Los_Angeles /etc/localtime \
    && echo "America/Los_Angeles" > /etc/timezone
ENV TZ=America/Los_Angeles

# Copy requirements
COPY requirements.test.txt /workspace/

# Install test dependencies
RUN pip install --no-cache-dir -r requirements.test.txt

# Copy project files
COPY . /workspace/

# Run tests
CMD ["pytest", "-v"]


